import tkinter as tk
import random
import time
from tkinter import messagebox

class LotteryGame:
    def __init__(self, root):
        self.root = root
        self.root.title("ğŸ¡ è½®ç›˜æŠ½å¥–")
        self.root.geometry("400x500")

        # æŠ½å¥–ç‰©å“åŠæ¦‚ç‡
        self.items = [
            ("å¤§å‘³", 0.001),  # æœ€ç¨€æœ‰ç‰©å“
            ("éº¦å½“åŠ³", 0.10),
            ("PAPA John", 0.09),
            ("éº»è¾£é¦™é”…", 0.085),
            ("pho", 0.08),
            ("pop eyes", 0.075),
            ("éŸ©å¼çƒ¤é¸¡", 0.07),
            ("pocky", 0.065),
            ("ä¸Šæµ·", 0.06),
            ("ç±³ç²‰", 0.055),
            ("ç›’é¥­", 0.05),
            ("åŒ…å­", 0.045),
            ("èŒ¶é¤å…", 0.04),
            ("è¥¿å®‰èœ", 0.035),
            ("å°æ¹¾èœ", 0.033)
        ]
        
        self.points = 0  # è®°å½•ç§¯åˆ†
        self.redeemable_items = {"X": 50, "Y": 80, "Z": 100, "W": 150, "V": 200}

        # åˆ›å»ºç•Œé¢
        self.canvas = tk.Canvas(root, width=300, height=300, bg="white")
        self.canvas.pack(pady=20)

        self.draw_button = tk.Button(root, text="ğŸ° å¼€å§‹æŠ½å¥–", font=("Arial", 14), command=self.start_lottery)
        self.draw_button.pack()

        self.result_label = tk.Label(root, text="ç­‰å¾…æŠ½å¥–ç»“æœ...", font=("Arial", 14))
        self.result_label.pack(pady=10)

        self.points_label = tk.Label(root, text="å½“å‰ç§¯åˆ†: 0", font=("Arial", 14))
        self.points_label.pack(pady=5)

        self.redeem_buttons = {}
        for item, cost in self.redeemable_items.items():
            btn = tk.Button(root, text=f"å…‘æ¢ {item} ({cost} ç§¯åˆ†)", font=("Arial", 12),
                            command=lambda i=item: self.redeem(i))
            btn.pack(pady=3)
            self.redeem_buttons[item] = btn

    def start_lottery(self):
        """å¼€å§‹æŠ½å¥–å¹¶æ˜¾ç¤ºåŠ¨ç”»"""
        self.result_label.config(text="ğŸ¡ è½®ç›˜æ—‹è½¬ä¸­...")
        self.root.update()

        for _ in range(10):
            time.sleep(0.1)
            self.canvas.delete("all")
            angle = random.randint(0, 360)
            self.canvas.create_arc(50, 50, 250, 250, start=angle, extent=60, fill="lightblue")
            self.root.update()

        self.points += 1  
        items, probabilities = zip(*self.items)
        prize = random.choices(items, probabilities)[0]

        self.result_label.config(text=f"ğŸ‰ ä½ æŠ½ä¸­äº†ï¼š{prize}ï¼")
        self.points_label.config(text=f"å½“å‰ç§¯åˆ†: {self.points}")

    def redeem(self, item):
        """ä½¿ç”¨ç§¯åˆ†å…‘æ¢å¥–å“"""
        cost = self.redeemable_items[item]
        if self.points >= cost:
            self.points -= cost
            messagebox.showinfo("å…‘æ¢æˆåŠŸ", f"ğŸ ä½ æˆåŠŸå…‘æ¢äº† {item}ï¼")
            self.points_label.config(text=f"å½“å‰ç§¯åˆ†: {self.points}")
        else:
            messagebox.showwarning("ç§¯åˆ†ä¸è¶³", f"âŒ å…‘æ¢ {item} éœ€è¦ {cost} ç§¯åˆ†ï¼Œä½ å½“å‰æœ‰ {self.points} ç§¯åˆ†")


root = tk.Tk()
game = LotteryGame(root)
root.mainloop()
